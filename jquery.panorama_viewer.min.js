!function(e){function n(e,t){var n,r,i=t;this.pause=function(){window.clearTimeout(n);i-=new Date-r};this.resume=function(){r=new Date;n=window.setTimeout(e,i)};this.resume()}function r(e){var t=e.changedTouches,n=t[0],r="";switch(e.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;default:return}var i=document.createEvent("MouseEvent");var s=2;if(navigator.userAgent.match(/Android/i)){s=10}i.initMouseEvent(r,true,true,window,1,n.screenX,n.screenY,n.clientX*s,n.clientY*s,false,false,false,false,0,null);n.target.dispatchEvent(i)}var t={repeat:false,direction:"horizontal",animationTime:700,easing:"ease-out",overlay:true};e.fn.panorama_viewer=function(n){document.addEventListener("touchstart",r,true);document.addEventListener("touchmove",r,true);document.addEventListener("touchend",r,true);document.addEventListener("touchcancel",r,true);return this.each(function(){function h(t){var n={x:false,y:false},i={x:l.x-(f.x-t.clientX),y:l.y-(f.y-t.clientY)};if(r.direction=="horizontal"){if(r.repeat==true){n.x=true}else{n.x=i.x<0&&i.x*-1<a.w}if(c&&n.x){l.x=i.x;l.y=0}}else{if(r.repeat==true){n.y=true}else{n.y=i.y<0&&i.y*-1<a.h}if(c&&n.y){l.y=i.y;l.x=0}}e(this).css("background-position",l.x+"px "+l.y+"px");f.x=t.clientX;f.y=t.clientY;t.stopPropagation();return false}function p(t){c=false;o.unbind("mousemove",h);if(t.type=="mousedown"){f.x=t.clientX;f.y=t.clientY;c=true;o.bind("mousemove",h)}else{e(document.body).focus()}t.stopPropagation();return false}function d(){l={x:0,y:0};e(this).css("backgroundPosition","0 0")}var r=e.extend({},t,n),i=e(this);i.find("> img").addClass("pv-pano");i.addClass("pv-container").wrapInner("<div class='pv-inner pv-animating'></div>");if(r.direction=="vertical"){i.addClass("pv-vertical")}i.find(".pv-animating").css({"-webkit-transition":"all "+r.animationTime+"ms "+r.easing,"-moz-transition":"all "+r.animationTime+"ms "+r.easing,"-ms-transition":"all "+r.animationTime+"ms "+r.easing,transition:"all "+r.animationTime+"ms "+r.easing});imgSrc=i.find(".pv-pano").attr("src");width=i.find(".pv-pano").width();height=i.find(".pv-pano").height();var s="no-repeat";if(r.repeat==true){s="repeat"}i.find(".pv-inner").css({height:height,width:width,background:"url("+imgSrc+") "+s,"background-size":"cover"});if(r.overlay==true){e("<div class='pv-overlay'><i class='pvicon-overlay'></i></div>").appendTo(i.find(".pv-inner"));i.find(".pv-inner").bind("mouseenter",function(){e(this).find(".pv-overlay ").fadeOut("fast")}).bind("mouseleave",function(){e(this).find(".pv-overlay ").fadeIn("fast")})}var o=i.find(".pv-inner"),u={w:parseInt(o.parent().width()),h:parseInt(o.parent().height())},a={w:width-u.w,h:height-u.h},f={x:0,y:0},l={x:0,y:0},c=false;o.bind("mousedown mouseup mouseleave",p);o.bind("dblclick",d);i.find(".pv-pano").hide()})}}(window.jQuery)